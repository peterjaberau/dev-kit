{
  "$ref": "#/definitions/MetadataFilter",
  "definitions": {
    "MetadataFilter": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "field": {
              "type": "string",
              "description": "Metadata field to filter"
            },
            "operator": {
              "type": "string",
              "enum": [
                "eq",
                "neq",
                "gt",
                "gte",
                "lt",
                "lte",
                "in",
                "nin",
                "contains"
              ],
              "default": "eq"
            },
            "value": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "number"
                },
                {
                  "type": "boolean"
                },
                {
                  "type": "array",
                  "items": {
                    "type": [
                      "string",
                      "number"
                    ]
                  }
                }
              ],
              "description": "Filter value"
            }
          },
          "required": [
            "field",
            "value"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "logic": {
              "type": "string",
              "enum": [
                "and",
                "or"
              ],
              "default": "and"
            },
            "filters": {
              "type": "array",
              "items": {
                "anyOf": [
                  {
                    "type": "object",
                    "properties": {
                      "field": {
                        "type": "string",
                        "description": "Metadata field to filter"
                      },
                      "operator": {
                        "type": "string",
                        "enum": [
                          "eq",
                          "neq",
                          "gt",
                          "gte",
                          "lt",
                          "lte",
                          "in",
                          "nin",
                          "contains"
                        ],
                        "default": "eq"
                      },
                      "value": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "boolean"
                          },
                          {
                            "type": "array",
                            "items": {
                              "type": [
                                "string",
                                "number"
                              ]
                            }
                          }
                        ],
                        "description": "Filter value"
                      }
                    },
                    "required": [
                      "field",
                      "value"
                    ],
                    "additionalProperties": false
                  },
                  {}
                ]
              }
            }
          },
          "required": [
            "filters"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "additionalProperties": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "number"
              },
              {
                "type": "boolean"
              },
              {
                "type": "array",
                "items": {
                  "type": [
                    "string",
                    "number"
                  ]
                }
              }
            ]
          }
        }
      ]
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}