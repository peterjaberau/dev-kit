{
  "$ref": "#/definitions/RetrievalStrategy",
  "definitions": {
    "RetrievalStrategy": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "similarity"
            },
            "topK": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 5,
              "description": "Number of results to retrieve"
            },
            "scoreThreshold": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "Minimum similarity score"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "mmr"
            },
            "topK": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 5
            },
            "fetchK": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 20,
              "description": "Initial fetch size"
            },
            "lambda": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.5,
              "description": "Diversity vs relevance (0=diverse, 1=relevant)"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "hybrid"
            },
            "topK": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 5
            },
            "vectorWeight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.7,
              "description": "Weight for vector search"
            },
            "keywordWeight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.3,
              "description": "Weight for keyword search"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "parent_document"
            },
            "topK": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "default": 5
            },
            "retrieveParent": {
              "type": "boolean",
              "default": true,
              "description": "Retrieve full parent document"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": false
        }
      ]
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}