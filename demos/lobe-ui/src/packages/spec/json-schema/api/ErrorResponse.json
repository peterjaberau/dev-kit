{
  "$ref": "#/definitions/ErrorResponse",
  "definitions": {
    "ErrorResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean",
          "const": false,
          "description": "Always false for error responses"
        },
        "error": {
          "type": "object",
          "properties": {
            "code": {
              "type": "string",
              "enum": [
                "validation_error",
                "invalid_field",
                "missing_required_field",
                "invalid_format",
                "value_too_long",
                "value_too_short",
                "value_out_of_range",
                "invalid_reference",
                "duplicate_value",
                "invalid_query",
                "invalid_filter",
                "invalid_sort",
                "max_records_exceeded",
                "unauthenticated",
                "invalid_credentials",
                "expired_token",
                "invalid_token",
                "session_expired",
                "mfa_required",
                "email_not_verified",
                "permission_denied",
                "insufficient_privileges",
                "field_not_accessible",
                "record_not_accessible",
                "license_required",
                "ip_restricted",
                "time_restricted",
                "resource_not_found",
                "object_not_found",
                "record_not_found",
                "field_not_found",
                "endpoint_not_found",
                "resource_conflict",
                "concurrent_modification",
                "delete_restricted",
                "duplicate_record",
                "lock_conflict",
                "rate_limit_exceeded",
                "quota_exceeded",
                "concurrent_limit_exceeded",
                "internal_error",
                "database_error",
                "timeout",
                "service_unavailable",
                "not_implemented",
                "external_service_error",
                "integration_error",
                "webhook_delivery_failed",
                "batch_partial_failure",
                "batch_complete_failure",
                "transaction_failed"
              ],
              "description": "Machine-readable error code"
            },
            "message": {
              "type": "string",
              "description": "Human-readable error message"
            },
            "category": {
              "type": "string",
              "enum": [
                "validation",
                "authentication",
                "authorization",
                "not_found",
                "conflict",
                "rate_limit",
                "server",
                "external",
                "maintenance"
              ],
              "description": "Error category"
            },
            "httpStatus": {
              "type": "number",
              "description": "HTTP status code"
            },
            "retryable": {
              "type": "boolean",
              "default": false,
              "description": "Whether the request can be retried"
            },
            "retryStrategy": {
              "type": "string",
              "enum": [
                "no_retry",
                "retry_immediate",
                "retry_backoff",
                "retry_after"
              ],
              "description": "Recommended retry strategy"
            },
            "retryAfter": {
              "type": "number",
              "description": "Seconds to wait before retrying"
            },
            "details": {
              "description": "Additional error context"
            },
            "fieldErrors": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "field": {
                    "type": "string",
                    "description": "Field path (supports dot notation)"
                  },
                  "code": {
                    "type": "string",
                    "enum": [
                      "validation_error",
                      "invalid_field",
                      "missing_required_field",
                      "invalid_format",
                      "value_too_long",
                      "value_too_short",
                      "value_out_of_range",
                      "invalid_reference",
                      "duplicate_value",
                      "invalid_query",
                      "invalid_filter",
                      "invalid_sort",
                      "max_records_exceeded",
                      "unauthenticated",
                      "invalid_credentials",
                      "expired_token",
                      "invalid_token",
                      "session_expired",
                      "mfa_required",
                      "email_not_verified",
                      "permission_denied",
                      "insufficient_privileges",
                      "field_not_accessible",
                      "record_not_accessible",
                      "license_required",
                      "ip_restricted",
                      "time_restricted",
                      "resource_not_found",
                      "object_not_found",
                      "record_not_found",
                      "field_not_found",
                      "endpoint_not_found",
                      "resource_conflict",
                      "concurrent_modification",
                      "delete_restricted",
                      "duplicate_record",
                      "lock_conflict",
                      "rate_limit_exceeded",
                      "quota_exceeded",
                      "concurrent_limit_exceeded",
                      "internal_error",
                      "database_error",
                      "timeout",
                      "service_unavailable",
                      "not_implemented",
                      "external_service_error",
                      "integration_error",
                      "webhook_delivery_failed",
                      "batch_partial_failure",
                      "batch_complete_failure",
                      "transaction_failed"
                    ],
                    "description": "Error code for this field"
                  },
                  "message": {
                    "type": "string",
                    "description": "Human-readable error message"
                  },
                  "value": {
                    "description": "The invalid value that was provided"
                  },
                  "constraint": {
                    "description": "The constraint that was violated (e.g., max length)"
                  }
                },
                "required": [
                  "field",
                  "code",
                  "message"
                ],
                "additionalProperties": false
              },
              "description": "Field-specific validation errors"
            },
            "timestamp": {
              "type": "string",
              "format": "date-time",
              "description": "When the error occurred"
            },
            "requestId": {
              "type": "string",
              "description": "Request ID for tracking"
            },
            "traceId": {
              "type": "string",
              "description": "Distributed trace ID"
            },
            "documentation": {
              "type": "string",
              "format": "uri",
              "description": "URL to error documentation"
            },
            "helpText": {
              "type": "string",
              "description": "Suggested actions to resolve the error"
            }
          },
          "required": [
            "code",
            "message"
          ],
          "additionalProperties": false,
          "description": "Error details"
        },
        "meta": {
          "type": "object",
          "properties": {
            "timestamp": {
              "type": "string",
              "format": "date-time"
            },
            "requestId": {
              "type": "string"
            },
            "traceId": {
              "type": "string"
            }
          },
          "additionalProperties": false,
          "description": "Response metadata"
        }
      },
      "required": [
        "success",
        "error"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}