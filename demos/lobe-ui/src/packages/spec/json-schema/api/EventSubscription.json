{
  "$ref": "#/definitions/EventSubscription",
  "definitions": {
    "EventSubscription": {
      "type": "object",
      "properties": {
        "subscriptionId": {
          "type": "string",
          "format": "uuid",
          "description": "Unique subscription identifier"
        },
        "events": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1,
            "pattern": "^[a-z*][a-z0-9_.*]*$",
            "description": "Event pattern (supports wildcards like \"record.*\" or \"*.created\")"
          },
          "description": "Event patterns to subscribe to (supports wildcards, e.g., \"record.*\", \"user.created\")"
        },
        "objects": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Object names to filter events by (e.g., [\"account\", \"contact\"])"
        },
        "filters": {
          "type": "object",
          "properties": {
            "conditions": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "field": {
                    "type": "string",
                    "description": "Field path to filter on (supports dot notation, e.g., \"user.email\")"
                  },
                  "operator": {
                    "type": "string",
                    "enum": [
                      "eq",
                      "ne",
                      "gt",
                      "gte",
                      "lt",
                      "lte",
                      "in",
                      "nin",
                      "contains",
                      "startsWith",
                      "endsWith",
                      "exists",
                      "regex"
                    ],
                    "description": "Comparison operator"
                  },
                  "value": {
                    "description": "Value to compare against (not needed for \"exists\" operator)"
                  }
                },
                "required": [
                  "field",
                  "operator"
                ],
                "additionalProperties": false
              },
              "description": "Array of filter conditions"
            },
            "and": {
              "type": "array",
              "items": {},
              "description": "AND logical combination of filters"
            },
            "or": {
              "type": "array",
              "items": {},
              "description": "OR logical combination of filters"
            },
            "not": {
              "description": "NOT logical negation of filter"
            }
          },
          "additionalProperties": false,
          "description": "Advanced filter conditions for event payloads"
        },
        "channels": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Channel names for scoped subscriptions"
        }
      },
      "required": [
        "subscriptionId",
        "events"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}