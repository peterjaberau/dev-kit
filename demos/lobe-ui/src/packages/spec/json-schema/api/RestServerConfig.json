{
  "$ref": "#/definitions/RestServerConfig",
  "definitions": {
    "RestServerConfig": {
      "type": "object",
      "properties": {
        "api": {
          "type": "object",
          "properties": {
            "version": {
              "type": "string",
              "pattern": "^[a-zA-Z0-9_\\-\\.]+$",
              "default": "v1",
              "description": "API version (e.g., v1, v2, 2024-01)"
            },
            "basePath": {
              "type": "string",
              "default": "/api",
              "description": "Base URL path for API"
            },
            "apiPath": {
              "type": "string",
              "description": "Full API path (defaults to {basePath}/{version})"
            },
            "enableCrud": {
              "type": "boolean",
              "default": true,
              "description": "Enable automatic CRUD endpoint generation"
            },
            "enableMetadata": {
              "type": "boolean",
              "default": true,
              "description": "Enable metadata API endpoints"
            },
            "enableUi": {
              "type": "boolean",
              "default": true,
              "description": "Enable UI API endpoints (Views, Menus, Layouts)"
            },
            "enableBatch": {
              "type": "boolean",
              "default": true,
              "description": "Enable batch operation endpoints"
            },
            "enableDiscovery": {
              "type": "boolean",
              "default": true,
              "description": "Enable API discovery endpoint"
            },
            "documentation": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable API documentation"
                },
                "title": {
                  "type": "string",
                  "default": "ObjectStack API",
                  "description": "API documentation title"
                },
                "description": {
                  "type": "string",
                  "description": "API description"
                },
                "version": {
                  "type": "string",
                  "description": "Documentation version"
                },
                "termsOfService": {
                  "type": "string",
                  "description": "Terms of service URL"
                },
                "contact": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "url": {
                      "type": "string"
                    },
                    "email": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "license": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "url": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "name"
                  ],
                  "additionalProperties": false
                }
              },
              "additionalProperties": false,
              "description": "OpenAPI/Swagger documentation config"
            },
            "responseFormat": {
              "type": "object",
              "properties": {
                "envelope": {
                  "type": "boolean",
                  "default": true,
                  "description": "Wrap responses in standard envelope"
                },
                "includeMetadata": {
                  "type": "boolean",
                  "default": true,
                  "description": "Include response metadata (timestamp, requestId)"
                },
                "includePagination": {
                  "type": "boolean",
                  "default": true,
                  "description": "Include pagination info in list responses"
                }
              },
              "additionalProperties": false,
              "description": "Response format options"
            }
          },
          "additionalProperties": false,
          "description": "REST API configuration"
        },
        "crud": {
          "type": "object",
          "properties": {
            "operations": {
              "type": "object",
              "properties": {
                "create": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable create operation"
                },
                "read": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable read operation"
                },
                "update": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable update operation"
                },
                "delete": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable delete operation"
                },
                "list": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable list operation"
                }
              },
              "additionalProperties": false,
              "description": "Enable/disable operations"
            },
            "patterns": {
              "type": "object",
              "additionalProperties": {
                "anyOf": [
                  {
                    "not": {}
                  },
                  {
                    "type": "object",
                    "properties": {
                      "method": {
                        "type": "string",
                        "enum": [
                          "GET",
                          "POST",
                          "PUT",
                          "DELETE",
                          "PATCH",
                          "HEAD",
                          "OPTIONS"
                        ],
                        "description": "HTTP method"
                      },
                      "path": {
                        "type": "string",
                        "description": "URL path pattern"
                      },
                      "summary": {
                        "type": "string",
                        "description": "Operation summary"
                      },
                      "description": {
                        "type": "string",
                        "description": "Operation description"
                      }
                    },
                    "required": [
                      "method",
                      "path"
                    ],
                    "additionalProperties": false
                  }
                ]
              },
              "propertyNames": {
                "enum": [
                  "create",
                  "read",
                  "update",
                  "delete",
                  "list"
                ]
              },
              "description": "Custom URL patterns for operations"
            },
            "dataPrefix": {
              "type": "string",
              "default": "/data",
              "description": "URL prefix for data endpoints"
            },
            "objectParamStyle": {
              "type": "string",
              "enum": [
                "path",
                "query"
              ],
              "default": "path",
              "description": "How object name is passed (path param or query param)"
            }
          },
          "additionalProperties": false,
          "description": "CRUD endpoints configuration"
        },
        "metadata": {
          "type": "object",
          "properties": {
            "prefix": {
              "type": "string",
              "default": "/meta",
              "description": "URL prefix for metadata endpoints"
            },
            "enableCache": {
              "type": "boolean",
              "default": true,
              "description": "Enable HTTP cache headers (ETag, Last-Modified)"
            },
            "cacheTtl": {
              "type": "integer",
              "default": 3600,
              "description": "Cache TTL in seconds"
            },
            "endpoints": {
              "type": "object",
              "properties": {
                "types": {
                  "type": "boolean",
                  "default": true,
                  "description": "GET /meta - List all metadata types"
                },
                "items": {
                  "type": "boolean",
                  "default": true,
                  "description": "GET /meta/:type - List items of type"
                },
                "item": {
                  "type": "boolean",
                  "default": true,
                  "description": "GET /meta/:type/:name - Get specific item"
                },
                "schema": {
                  "type": "boolean",
                  "default": true,
                  "description": "GET /meta/:type/:name/schema - Get JSON schema"
                }
              },
              "additionalProperties": false,
              "description": "Enable/disable specific endpoints"
            }
          },
          "additionalProperties": false,
          "description": "Metadata endpoints configuration"
        },
        "batch": {
          "type": "object",
          "properties": {
            "maxBatchSize": {
              "type": "integer",
              "minimum": 1,
              "maximum": 1000,
              "default": 200,
              "description": "Maximum records per batch operation"
            },
            "enableBatchEndpoint": {
              "type": "boolean",
              "default": true,
              "description": "Enable POST /data/:object/batch endpoint"
            },
            "operations": {
              "type": "object",
              "properties": {
                "createMany": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable POST /data/:object/createMany"
                },
                "updateMany": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable POST /data/:object/updateMany"
                },
                "deleteMany": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable POST /data/:object/deleteMany"
                },
                "upsertMany": {
                  "type": "boolean",
                  "default": true,
                  "description": "Enable POST /data/:object/upsertMany"
                }
              },
              "additionalProperties": false,
              "description": "Enable/disable specific batch operations"
            },
            "defaultAtomic": {
              "type": "boolean",
              "default": true,
              "description": "Default atomic/transaction mode for batch operations"
            }
          },
          "additionalProperties": false,
          "description": "Batch endpoints configuration"
        },
        "routes": {
          "type": "object",
          "properties": {
            "includeObjects": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Specific objects to generate routes for (empty = all)"
            },
            "excludeObjects": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Objects to exclude from route generation"
            },
            "nameTransform": {
              "type": "string",
              "enum": [
                "none",
                "plural",
                "kebab-case",
                "camelCase"
              ],
              "default": "none",
              "description": "Transform object names in URLs"
            },
            "overrides": {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "enabled": {
                    "type": "boolean",
                    "description": "Enable/disable routes for this object"
                  },
                  "basePath": {
                    "type": "string",
                    "description": "Custom base path"
                  },
                  "operations": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "boolean"
                    },
                    "propertyNames": {
                      "enum": [
                        "create",
                        "read",
                        "update",
                        "delete",
                        "list"
                      ]
                    },
                    "description": "Enable/disable specific operations"
                  }
                },
                "additionalProperties": false
              },
              "description": "Per-object route customization"
            }
          },
          "additionalProperties": false,
          "description": "Route generation configuration"
        }
      },
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}