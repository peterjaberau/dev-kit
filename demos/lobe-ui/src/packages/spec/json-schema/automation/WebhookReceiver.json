{
  "$ref": "#/definitions/WebhookReceiver",
  "definitions": {
    "WebhookReceiver": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "minLength": 2,
          "pattern": "^[a-z][a-z0-9_]*$",
          "description": "Webhook receiver unique name (lowercase snake_case)"
        },
        "path": {
          "type": "string",
          "description": "URL Path (e.g. /webhooks/stripe)"
        },
        "verificationType": {
          "type": "string",
          "enum": [
            "none",
            "header_token",
            "hmac",
            "ip_whitelist"
          ],
          "default": "none"
        },
        "verificationParams": {
          "type": "object",
          "properties": {
            "header": {
              "type": "string"
            },
            "secret": {
              "type": "string"
            },
            "ips": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        },
        "action": {
          "type": "string",
          "enum": [
            "trigger_flow",
            "script",
            "upsert_record"
          ],
          "default": "trigger_flow"
        },
        "target": {
          "type": "string",
          "description": "Flow ID or Script name"
        }
      },
      "required": [
        "name",
        "path",
        "target"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}