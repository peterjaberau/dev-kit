{
  "$ref": "#/definitions/AwarenessSession",
  "definitions": {
    "AwarenessSession": {
      "type": "object",
      "properties": {
        "sessionId": {
          "type": "string",
          "format": "uuid",
          "description": "Session identifier"
        },
        "documentId": {
          "type": "string",
          "description": "Document ID this session is for"
        },
        "users": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "userId": {
                "type": "string",
                "description": "User identifier"
              },
              "sessionId": {
                "type": "string",
                "format": "uuid",
                "description": "Session identifier"
              },
              "userName": {
                "type": "string",
                "description": "Display name"
              },
              "userAvatar": {
                "type": "string",
                "description": "User avatar URL"
              },
              "status": {
                "type": "string",
                "enum": [
                  "active",
                  "idle",
                  "viewing",
                  "disconnected"
                ],
                "description": "Current activity status"
              },
              "currentDocument": {
                "type": "string",
                "description": "Document ID user is currently editing"
              },
              "currentView": {
                "type": "string",
                "description": "Current view/page user is on"
              },
              "lastActivity": {
                "type": "string",
                "format": "date-time",
                "description": "ISO 8601 datetime of last activity"
              },
              "joinedAt": {
                "type": "string",
                "format": "date-time",
                "description": "ISO 8601 datetime when user joined session"
              },
              "permissions": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "User permissions in this session"
              },
              "metadata": {
                "type": "object",
                "additionalProperties": {},
                "description": "Additional user state metadata"
              }
            },
            "required": [
              "userId",
              "sessionId",
              "userName",
              "status",
              "lastActivity",
              "joinedAt"
            ],
            "additionalProperties": false
          },
          "description": "Active users in session"
        },
        "startedAt": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 datetime when session started"
        },
        "lastUpdate": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 datetime of last update"
        },
        "metadata": {
          "type": "object",
          "additionalProperties": {},
          "description": "Session metadata"
        }
      },
      "required": [
        "sessionId",
        "users",
        "startedAt",
        "lastUpdate"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}