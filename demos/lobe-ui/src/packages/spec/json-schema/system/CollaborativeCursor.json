{
  "$ref": "#/definitions/CollaborativeCursor",
  "definitions": {
    "CollaborativeCursor": {
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "User identifier"
        },
        "sessionId": {
          "type": "string",
          "format": "uuid",
          "description": "Session identifier"
        },
        "documentId": {
          "type": "string",
          "description": "Document identifier"
        },
        "userName": {
          "type": "string",
          "description": "Display name of user"
        },
        "position": {
          "type": "object",
          "properties": {
            "line": {
              "type": "integer",
              "minimum": 0,
              "description": "Cursor line number (0-indexed)"
            },
            "column": {
              "type": "integer",
              "minimum": 0,
              "description": "Cursor column number (0-indexed)"
            }
          },
          "required": [
            "line",
            "column"
          ],
          "additionalProperties": false,
          "description": "Current cursor position"
        },
        "selection": {
          "type": "object",
          "properties": {
            "anchor": {
              "type": "object",
              "properties": {
                "line": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Anchor line number"
                },
                "column": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Anchor column number"
                }
              },
              "required": [
                "line",
                "column"
              ],
              "additionalProperties": false,
              "description": "Selection anchor (start point)"
            },
            "focus": {
              "type": "object",
              "properties": {
                "line": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Focus line number"
                },
                "column": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Focus column number"
                }
              },
              "required": [
                "line",
                "column"
              ],
              "additionalProperties": false,
              "description": "Selection focus (end point)"
            },
            "direction": {
              "type": "string",
              "enum": [
                "forward",
                "backward"
              ],
              "description": "Selection direction"
            }
          },
          "required": [
            "anchor",
            "focus"
          ],
          "additionalProperties": false,
          "description": "Current text selection"
        },
        "style": {
          "type": "object",
          "properties": {
            "color": {
              "anyOf": [
                {
                  "type": "string",
                  "enum": [
                    "blue",
                    "green",
                    "red",
                    "yellow",
                    "purple",
                    "orange",
                    "pink",
                    "teal",
                    "indigo",
                    "cyan"
                  ]
                },
                {
                  "type": "string"
                }
              ],
              "description": "Cursor color (preset or custom hex)"
            },
            "opacity": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 1,
              "description": "Cursor opacity (0-1)"
            },
            "label": {
              "type": "string",
              "description": "Label to display with cursor (usually username)"
            },
            "showLabel": {
              "type": "boolean",
              "default": true,
              "description": "Whether to show label"
            },
            "pulseOnUpdate": {
              "type": "boolean",
              "default": true,
              "description": "Whether to pulse when cursor moves"
            }
          },
          "required": [
            "color"
          ],
          "additionalProperties": false,
          "description": "Visual style for this cursor"
        },
        "isTyping": {
          "type": "boolean",
          "default": false,
          "description": "Whether user is currently typing"
        },
        "lastUpdate": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 datetime of last cursor update"
        },
        "metadata": {
          "type": "object",
          "additionalProperties": {},
          "description": "Additional cursor metadata"
        }
      },
      "required": [
        "userId",
        "sessionId",
        "documentId",
        "userName",
        "position",
        "style",
        "lastUpdate"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}