{
  "$ref": "#/definitions/TraceSamplingConfig",
  "definitions": {
    "TraceSamplingConfig": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "always_on",
            "always_off",
            "trace_id_ratio",
            "rate_limiting",
            "parent_based",
            "probability",
            "composite",
            "custom"
          ],
          "description": "Sampling strategy"
        },
        "ratio": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Sample ratio (0-1)"
        },
        "rateLimit": {
          "type": "number",
          "exclusiveMinimum": 0,
          "description": "Traces per second"
        },
        "parentBased": {
          "type": "object",
          "properties": {
            "whenParentSampled": {
              "type": "string",
              "enum": [
                "always_on",
                "always_off",
                "trace_id_ratio",
                "rate_limiting",
                "parent_based",
                "probability",
                "composite",
                "custom"
              ],
              "description": "Sampling strategy type",
              "default": "always_on"
            },
            "whenParentNotSampled": {
              "type": "string",
              "enum": [
                "always_on",
                "always_off",
                "trace_id_ratio",
                "rate_limiting",
                "parent_based",
                "probability",
                "composite",
                "custom"
              ],
              "description": "Sampling strategy type",
              "default": "always_off"
            },
            "root": {
              "type": "string",
              "enum": [
                "always_on",
                "always_off",
                "trace_id_ratio",
                "rate_limiting",
                "parent_based",
                "probability",
                "composite",
                "custom"
              ],
              "description": "Sampling strategy type",
              "default": "trace_id_ratio"
            },
            "rootRatio": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.1
            }
          },
          "additionalProperties": false
        },
        "composite": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "strategy": {
                "type": "string",
                "enum": [
                  "always_on",
                  "always_off",
                  "trace_id_ratio",
                  "rate_limiting",
                  "parent_based",
                  "probability",
                  "composite",
                  "custom"
                ],
                "description": "Strategy type"
              },
              "ratio": {
                "type": "number",
                "minimum": 0,
                "maximum": 1
              },
              "condition": {
                "type": "object",
                "additionalProperties": {},
                "description": "Condition for this strategy"
              }
            },
            "required": [
              "strategy"
            ],
            "additionalProperties": false
          }
        },
        "rules": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "Rule name"
              },
              "match": {
                "type": "object",
                "properties": {
                  "service": {
                    "type": "string"
                  },
                  "spanName": {
                    "type": "string"
                  },
                  "attributes": {
                    "type": "object",
                    "additionalProperties": {}
                  }
                },
                "additionalProperties": false
              },
              "decision": {
                "type": "string",
                "enum": [
                  "drop",
                  "record_only",
                  "record_and_sample"
                ],
                "description": "Sampling decision"
              },
              "rate": {
                "type": "number",
                "minimum": 0,
                "maximum": 1
              }
            },
            "required": [
              "name",
              "decision"
            ],
            "additionalProperties": false
          },
          "default": []
        },
        "customSamplerId": {
          "type": "string",
          "description": "Custom sampler identifier"
        }
      },
      "required": [
        "type"
      ],
      "additionalProperties": false,
      "description": "Trace sampling configuration"
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}