{
  "$ref": "#/definitions/Report",
  "definitions": {
    "Report": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z_][a-z0-9_]*$",
          "description": "Report unique name"
        },
        "label": {
          "type": "string",
          "description": "Report label"
        },
        "description": {
          "type": "string"
        },
        "objectName": {
          "type": "string",
          "description": "Primary object"
        },
        "type": {
          "type": "string",
          "enum": [
            "tabular",
            "summary",
            "matrix",
            "joined"
          ],
          "default": "tabular",
          "description": "Report format type"
        },
        "columns": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "field": {
                "type": "string",
                "description": "Field name"
              },
              "label": {
                "type": "string",
                "description": "Override label"
              },
              "aggregate": {
                "type": "string",
                "enum": [
                  "sum",
                  "avg",
                  "max",
                  "min",
                  "count",
                  "unique"
                ],
                "description": "Aggregation function"
              }
            },
            "required": [
              "field"
            ],
            "additionalProperties": false
          },
          "description": "Columns to display"
        },
        "groupingsDown": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "field": {
                "type": "string",
                "description": "Field to group by"
              },
              "sortOrder": {
                "type": "string",
                "enum": [
                  "asc",
                  "desc"
                ],
                "default": "asc"
              },
              "dateGranularity": {
                "type": "string",
                "enum": [
                  "day",
                  "week",
                  "month",
                  "quarter",
                  "year"
                ],
                "description": "For date fields"
              }
            },
            "required": [
              "field"
            ],
            "additionalProperties": false
          },
          "description": "Row groupings"
        },
        "groupingsAcross": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "field": {
                "type": "string",
                "description": "Field to group by"
              },
              "sortOrder": {
                "type": "string",
                "enum": [
                  "asc",
                  "desc"
                ],
                "default": "asc"
              },
              "dateGranularity": {
                "type": "string",
                "enum": [
                  "day",
                  "week",
                  "month",
                  "quarter",
                  "year"
                ],
                "description": "For date fields"
              }
            },
            "required": [
              "field"
            ],
            "additionalProperties": false
          },
          "description": "Column groupings (Matrix only)"
        },
        "filter": {
          "allOf": [
            {
              "type": "object",
              "additionalProperties": {}
            },
            {
              "type": "object",
              "properties": {
                "$and": {
                  "type": "array",
                  "items": {}
                },
                "$or": {
                  "type": "array",
                  "items": {}
                },
                "$not": {}
              }
            }
          ],
          "description": "Filter criteria"
        },
        "chart": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "bar",
                "horizontal-bar",
                "column",
                "grouped-bar",
                "stacked-bar",
                "bi-polar-bar",
                "line",
                "area",
                "stacked-area",
                "step-line",
                "spline",
                "pie",
                "donut",
                "funnel",
                "pyramid",
                "scatter",
                "bubble",
                "treemap",
                "sunburst",
                "sankey",
                "word-cloud",
                "gauge",
                "solid-gauge",
                "metric",
                "kpi",
                "bullet",
                "choropleth",
                "bubble-map",
                "gl-map",
                "heatmap",
                "radar",
                "waterfall",
                "box-plot",
                "violin",
                "candlestick",
                "stock",
                "table",
                "pivot"
              ]
            },
            "title": {
              "type": "string",
              "description": "Chart title"
            },
            "subtitle": {
              "type": "string",
              "description": "Chart subtitle"
            },
            "description": {
              "type": "string",
              "description": "Accessibility description"
            },
            "xAxis": {
              "type": "string",
              "description": "Grouping field for X-Axis"
            },
            "yAxis": {
              "type": "string",
              "description": "Summary field for Y-Axis"
            },
            "series": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Field name or series identifier"
                  },
                  "label": {
                    "type": "string",
                    "description": "Series display label"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "bar",
                      "horizontal-bar",
                      "column",
                      "grouped-bar",
                      "stacked-bar",
                      "bi-polar-bar",
                      "line",
                      "area",
                      "stacked-area",
                      "step-line",
                      "spline",
                      "pie",
                      "donut",
                      "funnel",
                      "pyramid",
                      "scatter",
                      "bubble",
                      "treemap",
                      "sunburst",
                      "sankey",
                      "word-cloud",
                      "gauge",
                      "solid-gauge",
                      "metric",
                      "kpi",
                      "bullet",
                      "choropleth",
                      "bubble-map",
                      "gl-map",
                      "heatmap",
                      "radar",
                      "waterfall",
                      "box-plot",
                      "violin",
                      "candlestick",
                      "stock",
                      "table",
                      "pivot"
                    ],
                    "description": "Override chart type for this series"
                  },
                  "color": {
                    "type": "string",
                    "description": "Series color (hex/rgb/token)"
                  },
                  "stack": {
                    "type": "string",
                    "description": "Stack identifier to group series"
                  },
                  "yAxis": {
                    "type": "string",
                    "enum": [
                      "left",
                      "right"
                    ],
                    "default": "left",
                    "description": "Bind to specific Y-Axis"
                  }
                },
                "required": [
                  "name"
                ],
                "additionalProperties": false
              },
              "description": "Defined series configuration"
            },
            "colors": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Color palette"
            },
            "height": {
              "type": "number",
              "description": "Fixed height in pixels"
            },
            "showLegend": {
              "type": "boolean",
              "default": true,
              "description": "Display legend"
            },
            "showDataLabels": {
              "type": "boolean",
              "default": false,
              "description": "Display data labels"
            },
            "annotations": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "line",
                      "region"
                    ],
                    "default": "line"
                  },
                  "axis": {
                    "type": "string",
                    "enum": [
                      "x",
                      "y"
                    ],
                    "default": "y"
                  },
                  "value": {
                    "type": [
                      "number",
                      "string"
                    ],
                    "description": "Start value"
                  },
                  "endValue": {
                    "type": [
                      "number",
                      "string"
                    ],
                    "description": "End value for regions"
                  },
                  "color": {
                    "type": "string"
                  },
                  "label": {
                    "type": "string"
                  },
                  "style": {
                    "type": "string",
                    "enum": [
                      "solid",
                      "dashed",
                      "dotted"
                    ],
                    "default": "dashed"
                  }
                },
                "required": [
                  "value"
                ],
                "additionalProperties": false
              }
            },
            "interaction": {
              "type": "object",
              "properties": {
                "tooltips": {
                  "type": "boolean",
                  "default": true
                },
                "zoom": {
                  "type": "boolean",
                  "default": false
                },
                "brush": {
                  "type": "boolean",
                  "default": false
                },
                "clickAction": {
                  "type": "string",
                  "description": "Action ID to trigger on click"
                }
              },
              "additionalProperties": false
            },
            "groupBy": {
              "type": "string",
              "description": "Additional grouping field"
            }
          },
          "required": [
            "type",
            "xAxis",
            "yAxis"
          ],
          "additionalProperties": false,
          "description": "Embedded chart configuration"
        }
      },
      "required": [
        "name",
        "label",
        "objectName",
        "columns"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}